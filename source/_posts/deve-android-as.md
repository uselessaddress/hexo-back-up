title: "Android开发——Android Studio"
toc: true
date: 2015-07-17 21:34:49
tags:
- android
categories: 设计开发
---

# 前言
工欲善其事，必先利其器。来学习一下这款将要陪伴哥哥很久的工具——AS。

# 简介
Android Studio 是一个Android开发环境，基于IntelliJ IDEA. 类似 Eclipse ADT，Android Studio 提供了集成的 Android 开发工具用于开发和调试。

在IDEA的基础上，Android Studio 提供：

- 基于Gradle的构建支持
- Android 专属的重构和快速修复
- 提示工具以捕获性能、可用性、版本兼容性等问题
- 支持ProGuard 和应用签名
- 基于模板的向导来生成常用的 Android 应用设计和组件
- 功能强大的布局编辑器，可以让你拖拉 UI 控件并进行效果预览

<!--more-->

# 界面
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/界面.png)
1、Project 面板
用于浏览项目文件。 Project面板会显示当前的所有的module 。

2、Build Variants 面板
用于设置当前项目的Build Variants。

3、Android 面板
功能类似于Eclipse中的Logcat，但是比其多了一些常用功能，例如：截图，查看系统信息等。

4、编辑区
用于编辑文件。

5、Gradle 面板
Gradle任务列表，双击可执行Gradle任务。常用任务： build 、 clean 、 assemble 、 assembleRelease 、 assembleDebug 、 lint 。

# 项目结构
## Android模式
新建一个项目，默认项目结构如下：
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/android.jpg)
可以看到和Eclipse的目录结构有很大区别，AS一个窗口只能有一个项目，而Eclipse则可以同时存在很多项目。

## Project模式
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/project.jpg)

目录结构中将java代码和资源文件（图片、布局文件等）全部归结为src，在src/main下，有java和res两个文件夹，java文件夹则相当于Eclipse下的src文件夹，res目录结构则一样。

下面详解一下Project模式下的目录结构：
### .gradle
官网www.gradle.org上介绍Gradle是升级版(evolved)的自动化构建工具。它可以自动构建，测试，发布，部署，同时使更多的软件包或其他类型诸如生成静态网站，文档等项目自动化。

说白了，gradle是maven的同类工具，而且比maven更好用。

![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/_gradle.jpg)
打开.gradle文件夹，我们看到，里面除了有配置文件，还有一些二进制文件。由此，小编推测，这个目录中存放的就是gracle这款工具。

### .idea
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/_idea.jpg)
Project的配置文件目录，类似Eclipse中的project.properties。

### app
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/module.jpg)
一个Module，基本开发单位。

- build
构建目录，相当于Eclipse中默认Java工程的bin目录。 

- libs
依赖包。

- src/main/java
Java代码。

- src/main/res/layout
App布局及界面元素配置。

- src/main/res/menu
App菜单配置。

- src/main/res/values 
dimens.xml 定义css的配置文件；
strings.xml 定义字符串的配置文件；
styles.xml 定义style的配置文件。

- src/main/res/mipmap-\*
App图标。

- src/main/AndroidMainfest.xml
App基本信息（名称、版本、SDK、权限等等）。

- src/.gitignore
顾名思义，小编猜测这个文件是用来配置上传到github时忽略的文件夹。

- src/app.iml
.iml文件是AS识别项目的配置文件，跟Eclipse里面的.project文件作用类似

- src/build.gradle
gradle构建脚本。

- src/proguard-rules.pro
混淆规则的声明。混淆代码，可以保护自己的作品不被别人破解。

### build
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/build.jpg)


### gradle
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/gradle.jpg)

### .gitignore等
.gitignore、build.gradle、First.iml三个文件，在Module中也存在，只不过作用范围不一样。

### gradle.properties
Project-wide Gradle settings。

### gradlew和gradlew.bat
gradlew是一个shell脚本，适用于Linux；gradlew.bat是一个批处理文件，适用于windows。

gradlew，是对gradle的一个封装，在使用这个命令时会自动去下载gradle，如果已经安装了gradle则在编译过程中使用的gradlew命令应该都可以替换成gradle。自动下载gradle是根据gradle\wrapper目录中的gradle-wrapper.properties中配置的，distributionUrl=https\\://services.gradle.org/distributions/gradle-2.2.1-all.zip

### local.properties
This file is automatically generated by Android Studio。

### setting.gradle
配置Project中包含的Module。在完全删除某个Module之前,如果还想要把它添加到当前project中,直接setting.gradle中添加该Module的名称即可。

> AS中有Project和Module的概念：
project in Android Studio is like a workspace in Eclipse。
module in Android Studio is like a project in Eclipse。

# 增删项目

## 新建Project
新建Project的时候，会同时新建一个默认Module，name为app，可以重命名。
新建Project和打开Project，都会打开一个新的AS窗口，可以在菜单栏Window中切换Project。

## 删除Project
在工作路径下，删除Project文件夹。

## 新建Module
新建Module，存放在当前的Project下，共享当前Project的一些资源，比如External Libraries和部分配置文件。

## 删除Module
1、File，Project Structure；或者右击项目，Open Module Settings。
2、选中Module，单击右上角的“-”号。
3、右击Module（此时Module上的手机符号已经没有了），delete。



# 个性设置

## 编辑器字体
1、File，Settings；或者直接点击工具栏的Settings。
2、Editor，Color&Fonts，Font。
3、把Darcula主题sava as为自己的主题，然后进行设置。
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/font.jpg)

## 编码格式
默认编码格式：
File，Other Settings，Default Settings，Editor，File Encodings。

当前Project编码格式：
File，Settings，Editor，File Encodings。

## 代码提示
Settings，Editor，General，Code Completion，Case sensitive completion改为None。

## 悬停提示
Settings，Editor，General，Show quick doc on mouse move前打勾。

# Lint工具
对代码进行测试是一回事，但同样重要的是、我们还需要在编写代码的同时引入各种最佳实践。这不仅能够显著改进性能表现，也能增加应用程序的整体稳定性。另外，经过合理结构调整的项目在维护方面也更为轻松。

Android Studio中提供的Android Lint是一款静态分析工具，它负责对项目源代码加以分析。它能够检测出应用程序中的潜在漏洞以及其它可能被编译器所忽略的其它代码问题。

就以下面这幅截图为例，大家可以看到该布局中的LinearLayout并未得到实际使用。Android Lint的优势在于，它能帮助我们重视警告或报错信息的出现原因，从而更轻松地修复或者解决这些问题。
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/lint.png)

请大家养成重复使用Android Studio Lint工具的好习惯，这能帮助我们准确检测到项目当中存在的潜在问题。Lint工具甚至能告诉我们应用程序中是否存在重复的图片或者编译内容。

要运行Lint工具，大家首先需要在Android Studio的“Analyze”菜单中选择“Inspect Code…”。当Android Studio完成了对项目的检测之后，它会在窗口底部显示出分析结果。请注意，除了Android Lint之外，Android Studio还提供一系列其它检查功能。只需双击某个已经发现的问题，系统就会帮助大家定位到对应文件中存在问题的位置。
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/lint2.png)

# 富布局编辑器
AS提供一套富布局编辑器，大家可以在其中随意拖拽各类用户界面组件。大家还可以在多屏幕配置中同时查看多种布局的显示效果，这一点我们在前文中已经提到过。

这款富布局编辑器在使用方面非常直观简单。我们首先需要一套要处理的布局方案。浏览到项目中res文件夹下的layout文件夹，右键点击layout文件夹，然后在弹出的菜单中选择New>Layout resource file。

下面为新布局设定一个名称与root元素，而后点击“OK”。AS会自动在窗口右侧的编辑器当中打开该布局。
![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/富布局编辑器.png)


在编辑器的底部，大家会看到两个标签，分别是Design与Text。点击Text标签后编辑器将被激活，这样我们就能对当前选定的布局方案作出变更。

点击Design标签则会激活另一套编辑器内容，其中显示出布局的预览效果。要向布局当中添加其它功能性组件，我们只需将其从布局左侧的组件列表中拖出并放入布局内即可。是的，就这么简单。

![](http://7oxjrx.com1.z0.glb.clouddn.com/@/imgs/android/as/富布局编辑器2.png)

# 快捷键
Settings，Keymap，选择一个Keymaps。如果习惯用Eclipse，那么不妨选择Eclipse。谷歌建议使用默认快捷键，因为比Eclipse要丰富。如果使用默认快捷键，下面的几个快捷键最好记住。

## ctrl+shift+enter
代码自动补全。

## alt+enter
代码提示。

## ctrl+alt+o
引入包管理。

## ctrl+q
查看定义。

## ctrl+alt+t
弹出包围结构。

## ctrl+j
模板提示。

# 后记
AS很强大，不可能面面俱到，先就这些吧。
无论使用什么工具，当你开始使用它，一切都会变得简单！

# 参考文档
与Android Studio的第一次亲密接触
http://www.imooc.com/learn/206

Android Studio 常用功能介绍
http://ask.android-studio.org/?/article/23

Android Studio系列教程二--基本设置与运行
http://stormzhang.com/devtools/2014/11/28/android-studio-tutorial2/

Android学习系列(41)--Android Studio简单使用
http://www.cnblogs.com/qianxudetianxia/p/3848272.html

最全面的Android Studio使用教程
http://www.open-open.com/lib/view/open1416883124753.html

Gradle基础
http://segmentfault.com/a/1190000002439306

